import{r as d,j as e}from"./index-Dr_LXMpC.js";import"./html2canvas.esm-BfxBtG_O.js";const O=({darkMode:t})=>{const[i,m]=d.useState([]),[u,j]=d.useState(""),[w,y]=d.useState(!0),[D,T]=d.useState(0),[E,F]=d.useState(0),[L,Y]=d.useState(0),[N,b]=d.useState(""),[$,v]=d.useState(!1),[A,C]=d.useState(!1);d.useEffect(()=>{let a=i.length,l=i.filter(f=>f.attended).length,n=a===0?0:l/a*100;T(a),F(l),Y(n.toFixed(2)),v(n<75&&a>0);const c=new Date,o=c.getMonth(),x=c.getFullYear();let p=0;i.forEach(f=>{const S=new Date(f.date);S.getMonth()===o&&S.getFullYear()===x&&!f.attended&&p++}),C(p>=4)},[i]);const P=()=>{if(!u){b("Please select a date.");return}if(i.some(l=>l.date===u)){b("Attendance for this date already exists. Please edit the existing entry or choose a different date.");return}m(l=>[...l,{id:Date.now(),date:u,attended:w}].sort((n,c)=>new Date(n.date)-new Date(c.date))),j(""),y(!0),b("")},W=(a,l,n)=>{m(c=>c.map(o=>o.id===a?{...o,[l]:n}:o))},H=a=>{m(l=>l.filter(n=>n.id!==a))},z=()=>{m([]),j(""),y(!0),b(""),v(!1),C(!1)},g=(()=>{if(i.length<2)return[];const a=[...i].sort((o,x)=>new Date(o.date)-new Date(x.date));let l=0,n=0;const c=[];return a.forEach((o,x)=>{l++,o.attended&&n++;const p=n/l*100;c.push({x,y:p,date:o.date})}),c})(),h=300,r=150,s=20,B=()=>{if(g.length===0)return"";const a=(h-2*s)/(g.length-1||1),l=(r-2*s)/100;return g.map((n,c)=>{const o=s+c*a,x=r-s-n.y*l;return`${o},${x}`}).join(" ")};return e.jsx("div",{className:`p-4 font-inter ${t?"bg-gray-900":"bg-gradient-to-br from-yellow-50 to-orange-100"}`,children:e.jsxs("div",{className:`p-8 rounded-2xl shadow-xl w-full max-w-4xl mx-auto border space-y-6 ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("h2",{className:`text-3xl font-bold flex items-center justify-center ${t?"text-gray-100":"text-gray-800"}`,children:[e.jsx("span",{className:"mr-2 text-4xl",children:"🗓️"})," Attendance Tracker"]}),e.jsx("p",{className:`mt-2 text-md ${t?"text-gray-300":"text-gray-600"}`,children:"Log your daily attendance, track trends, and stay on top of your required percentage."})]}),e.jsxs("div",{className:`p-6 rounded-xl shadow-inner mb-6 border space-y-4 ${t?"bg-gray-900 border-gray-700":"bg-gray-50 border-gray-200"}`,children:[e.jsx("h3",{className:`text-xl font-semibold text-center ${t?"text-gray-100":"text-gray-800"}`,children:"Add Daily Attendance"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 items-end",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"log-date-main",className:`block text-sm font-semibold mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:"Date:"}),e.jsx("input",{type:"date",id:"log-date-main",value:u,onChange:a=>j(a.target.value),className:`w-full p-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${t?"bg-gray-700 border-gray-600 text-gray-100":"border-gray-300"}`,max:new Date().toISOString().split("T")[0]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-semibold mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:"Attended:"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("label",{className:"inline-flex items-center",children:[e.jsx("input",{type:"radio",name:"attended-status",value:"true",checked:w===!0,onChange:()=>y(!0),className:"form-radio text-blue-600 h-4 w-4"}),e.jsx("span",{className:`ml-2 ${t?"text-gray-100":"text-gray-800"}`,children:"Yes"})]}),e.jsxs("label",{className:"inline-flex items-center",children:[e.jsx("input",{type:"radio",name:"attended-status",value:"false",checked:w===!1,onChange:()=>y(!1),className:"form-radio text-red-600 h-4 w-4"}),e.jsx("span",{className:`ml-2 ${t?"text-gray-100":"text-gray-800"}`,children:"No"})]})]})]})]}),N&&e.jsx("p",{className:"text-red-500 text-xs italic mt-2 text-center col-span-2",children:N}),e.jsx("button",{onClick:P,className:`mt-4 w-full font-bold py-3 px-6 rounded-lg shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-offset-2 transition-all duration-300 transform hover:scale-105 ${t?"bg-blue-700 hover:bg-blue-600 text-white focus:ring-blue-500":"bg-blue-600 hover:bg-blue-700 text-white focus:ring-blue-500"}`,children:"Add Entry"})]}),e.jsxs("div",{className:`p-6 rounded-xl shadow-md border text-center space-y-4 ${t?"bg-purple-900 border-purple-700":"bg-purple-50 border-purple-200"}`,children:[e.jsx("h3",{className:`text-xl font-semibold ${t?"text-purple-200":"text-purple-800"}`,children:"Your Current Attendance"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-lg font-medium",children:[e.jsxs("div",{className:`p-3 rounded-lg shadow-sm ${t?"bg-gray-800 text-gray-100":"bg-white"}`,children:[e.jsx("p",{className:`${t?"text-gray-300":"text-gray-600"}`,children:"Total Classes:"}),e.jsx("p",{className:"text-blue-700 text-3xl font-bold",children:D})]}),e.jsxs("div",{className:`p-3 rounded-lg shadow-sm ${t?"bg-gray-800 text-gray-100":"bg-white"}`,children:[e.jsx("p",{className:`${t?"text-gray-300":"text-gray-600"}`,children:"Classes Attended:"}),e.jsx("p",{className:"text-green-600 text-3xl font-bold",children:E})]}),e.jsxs("div",{className:`p-3 rounded-lg shadow-sm ${t?"bg-gray-800 text-gray-100":"bg-white"}`,children:[e.jsx("p",{className:`${t?"text-gray-300":"text-gray-600"}`,children:"Attendance %:"}),e.jsxs("p",{className:"text-blue-700 text-3xl font-bold",children:[L,"%"]})]})]})]}),($||A)&&e.jsxs("div",{className:"space-y-3",children:[$&&e.jsxs("div",{className:`border-l-4 border-red-500 text-red-700 p-4 rounded-md shadow-sm ${t?"bg-red-900 dark:text-red-300":"bg-red-100"}`,role:"alert",children:[e.jsx("p",{className:"font-bold",children:"🚨 Risk of shortage!"}),e.jsx("p",{className:"text-sm",children:"Your attendance is below the 75% threshold. Please monitor it closely."})]}),A&&e.jsxs("div",{className:`border-l-4 border-yellow-500 text-yellow-700 p-4 rounded-md shadow-sm ${t?"bg-yellow-900 dark:text-yellow-300":"bg-yellow-100"}`,role:"alert",children:[e.jsx("p",{className:"font-bold",children:"⚠️ Watch your attendance!"}),e.jsx("p",{className:"text-sm",children:"You've missed 4 or more classes this month. Beware!"})]})]}),g.length>1&&e.jsxs("div",{className:`p-6 rounded-xl shadow-md border text-center space-y-4 ${t?"bg-blue-900 border-blue-700":"bg-blue-50 border-blue-200"}`,children:[e.jsx("h3",{className:`text-xl font-semibold ${t?"text-blue-200":"text-blue-800"}`,children:"Attendance Trend Over Time"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("svg",{viewBox:`0 0 ${h} ${r}`,className:`w-full h-auto rounded-lg p-2 border ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[e.jsx("line",{x1:s,y1:r-s,x2:h-s,y2:r-s,stroke:`${t?"#6B7280":"#ccc"}`,strokeWidth:"1"}),e.jsx("line",{x1:s,y1:s,x2:s,y2:r-s,stroke:`${t?"#6B7280":"#ccc"}`,strokeWidth:"1"}),e.jsx("text",{x:s-5,y:r-s,textAnchor:"end",fontSize:"10",fill:`${t?"#9CA3AF":"#666"}`,children:"0%"}),e.jsx("text",{x:s-5,y:r-s-50*(r-2*s)/100,textAnchor:"end",fontSize:"10",fill:`${t?"#9CA3AF":"#666"}`,children:"50%"}),e.jsx("text",{x:s-5,y:s+5,textAnchor:"end",fontSize:"10",fill:`${t?"#9CA3AF":"#666"}`,children:"100%"}),e.jsx("line",{x1:s,y1:r-s-75*(r-2*s)/100,x2:h-s,y2:r-s-75*(r-2*s)/100,stroke:"#FF6384",strokeWidth:"1",strokeDasharray:"4 4"}),e.jsx("text",{x:h-s+5,y:r-s-75*(r-2*s)/100+4,fontSize:"10",fill:"#FF6384",children:"75%"}),e.jsx("polyline",{fill:"none",stroke:"#4A90E2",strokeWidth:"2",points:B()}),g.map((a,l)=>e.jsx("circle",{cx:s+l*((h-2*s)/(g.length-1||1)),cy:r-s-a.y*((r-2*s)/100),r:"3",fill:"#4A90E2",title:`${a.date}: ${a.y.toFixed(2)}%`},l))]})}),e.jsx("p",{className:`text-sm ${t?"text-gray-300":"text-gray-600"}`,children:"Visual representation of your attendance percentage over time."})]}),i.length>0&&e.jsxs("div",{className:`p-6 rounded-xl shadow-md border overflow-x-auto space-y-4 ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[e.jsx("h3",{className:`text-xl font-semibold text-center ${t?"text-gray-100":"text-gray-800"}`,children:"Your Attendance Log"}),e.jsxs("table",{className:`min-w-full rounded-lg ${t?"bg-gray-800":"bg-white"}`,children:[e.jsx("thead",{className:`${t?"bg-gray-700":"bg-gray-100"}`,children:e.jsxs("tr",{children:[e.jsx("th",{className:`py-3 px-4 text-left text-sm font-semibold ${t?"text-gray-200":"text-gray-700"}`,children:"Date"}),e.jsx("th",{className:`py-3 px-4 text-left text-sm font-semibold ${t?"text-gray-200":"text-gray-700"}`,children:"Attended"}),e.jsx("th",{className:`py-3 px-4 text-left text-sm font-semibold ${t?"text-gray-200":"text-gray-700"}`,children:"Actions"})]})}),e.jsx("tbody",{children:i.map((a,l)=>e.jsxs("tr",{className:`${l%2===0?t?"bg-gray-800":"bg-white":t?"bg-gray-700":"bg-gray-50"} border-b ${t?"border-gray-600":"border-gray-200"}`,children:[e.jsx("td",{className:`p-4 ${t?"text-gray-100":"text-gray-800"}`,children:a.date}),e.jsxs("td",{className:"p-4",children:[e.jsxs("select",{id:`attendance-status-main-${a.id}`,name:`attendance-status-${a.id}`,value:a.attended.toString(),onChange:n=>W(a.id,"attended",n.target.value==="true"),className:`w-full p-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${t?"bg-gray-700 border-gray-600 text-gray-100":"bg-white border-gray-300 text-gray-800"}`,children:[e.jsx("option",{value:"true",children:"Yes ✅"}),e.jsx("option",{value:"false",children:"No ❌"})]}),e.jsx("label",{htmlFor:`attendance-status-main-${a.id}`,className:"sr-only",children:"Attendance Status"})]}),e.jsx("td",{className:"p-4",children:e.jsx("button",{onClick:()=>H(a.id),className:"p-2 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors duration-200",title:"Delete Entry",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1H9a1 1 0 00-1 1v3M4 7h16"})})})})]},a.id))})]})]}),i.length>0&&e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{onClick:z,className:`font-bold py-3 px-6 rounded-lg shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-offset-2 transition-all duration-300 transform hover:scale-105 ${t?"bg-gray-700 hover:bg-gray-600 text-gray-100 focus:ring-gray-500":"bg-gray-200 hover:bg-gray-300 text-gray-800 focus:ring-gray-400"}`,children:"Reset All Attendance"})}),e.jsxs("div",{className:`p-5 rounded-lg border shadow-sm space-y-3 ${t?"bg-blue-900 border-blue-700":"bg-blue-50 border-blue-200"}`,children:[e.jsx("h3",{className:`font-bold text-lg ${t?"text-blue-200":"text-blue-800"}`,children:"📘 How Attendance is Calculated:"}),e.jsxs("p",{className:`text-sm ${t?"text-gray-300":"text-gray-700"}`,children:["Your attendance percentage is determined by dividing the number of classes you've attended by the total number of classes held, then multiplying by 100.",e.jsx("br",{}),"Formula: $Attendance \\% = (C_A / T_C) \\times 100$, where $C_A$ = Classes Attended, $T_C$ = Total Classes",e.jsx("br",{}),"This percentage is crucial for college eligibility for exams and internal marks."]}),e.jsx("h3",{className:`font-bold text-lg ${t?"text-blue-200":"text-blue-800"}`,children:"📊 How Trends and Alerts Help:"}),e.jsxs("ul",{className:`list-disc list-inside text-sm space-y-1 ${t?"text-gray-300":"text-gray-700"}`,children:[e.jsxs("li",{children:[e.jsx("span",{className:`font-semibold ${t?"text-gray-200":"text-gray-800"}`,children:"Trend Line:"})," Visualizes your attendance over time, helping you spot positive or negative patterns."]}),e.jsxs("li",{children:[e.jsx("span",{className:`font-semibold ${t?"text-gray-200":"text-gray-800"}`,children:"Low Attendance Alert:"})," Notifies you immediately if your attendance drops below the critical 75% mark, allowing you to take corrective action."]}),e.jsxs("li",{children:[e.jsx("span",{className:`font-semibold ${t?"text-gray-200":"text-gray-800"}`,children:"Monthly Missed Classes Alert:"})," Warns you if you've missed 4 or more classes this month, prompting you to be more mindful of your attendance."]})]}),e.jsx("h3",{className:`font-bold text-lg ${t?"text-blue-200":"text-blue-800"}`,children:"💡 Pro Tip:"}),e.jsx("p",{className:`text-sm ${t?"text-gray-300":"text-gray-700"}`,children:"Make it a habit to log your attendance daily. Early tracking helps prevent last-minute attendance shortages and keeps your academic journey smooth!"})]})]})})};export{O as default};
